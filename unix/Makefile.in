# This is the Makefile for the unix subdirectory of Taylor UUCP.
# This subdirectory contains Unix specific support functions.
#
# The file Makefile.in should be processed by configure to generate
# Makefile.  If you want to generate Makefile by hand, you must find
# all variables surrounded by @ and replace them with the correct
# value (e.g. @CC@ must be replaced by something like cc or gcc).

SHELL=/bin/sh

# These are overridden by the call from the top level Makefile
CC = @CC@
CFLAGS = @CFLAGS@
RANLIB = @RANLIB@
prefix = /usr/local
sbindir = $(prefix)/lib/uucp
UUDIRFLAGS =

srcdir = @srcdir@
VPATH = @srcdir@

MORECFLAGS=-I$(srcdir)/.. -DSBINDIR=\"$(sbindir)\" -DOWNER=\"$(owner)\" $(UUDIRFLAGS)

OBJS = access.o addbas.o app3.o app4.o basnam.o cwd.o chmod.o cusub.o \
	detach.o \
	efopen.o \
	epopen.o \
	exists.o \
	filnam.o indir.o init.o \
	isdir.o isfork.o \
	iswait.o jobid.o lcksys.o link.o locfil.o lock.o loctim.o \
	mail.o mkdirs.o \
	mode.o move.o opensr.o pause.o picksb.o \
	portnm.o proctm.o \
	run.o seq.o serial.o signal.o sindir.o sleep.o spawn.o splcmd.o \
	splnam.o spool.o \
	srmdir.o statsb.o status.o \
	time.o tmpfil.o trunc.o uacces.o ultspl.o uuto.o walk.o \
	wldcrd.o work.o \
	xqtfil.o xqtsub.o @UNIXOBJS@

all: libunix.a

clean: rm -f $(OBJS) libunix.a

distclean: clean
	rm -f Makefile

mostlyclean: clean
realclean: clean

libunix.a: $(OBJS)
	rm -f libunix.a
	ar rc libunix.a $(OBJS)
	-$(RANLIB) libunix.a

.c.o:
	$(CC) -c $(CFLAGS) $(MORECFLAGS) $<

dist:
	mkdir ../uucp-$(VERSION)/unix
	ln `cat MANIFEST` ../uucp-$(VERSION)/unix

Makefile: Makefile.in
	(cd ..; sh config.status)

# Header file dependencies.

$(OBJS): $(srcdir)/../uucp.h $(srcdir)/../conf.h $(srcdir)/../policy.h $(srcdir)/../uuconf.h $(srcdir)/../sysdep.h $(srcdir)/../system.h

serial.o: $(srcdir)/../conn.h
cusub.o: $(srcdir)/../cu.h $(srcdir)/../conn.h $(srcdir)/../prot.h
