# This is the Makefile for the Taylor UUCP uuconf library
#
# The file Makefile.in should be processed by configure to generate
# Makefile.  If you want to generate Makefile by hand, you must find
# all variables surrounded by @ and replace them with the correct
# value (e.g. @CC@ must be replaced by something like cc or gcc).

SHELL = /bin/sh

# These values are overriden by the top level Makefile
prefix = /usr/local
newconfigdir = $(prefix)/conf/uucp
oldconfigdir = /usr/lib/uucp

# These values are overridden by the top level Makefile
CC = @CC@
CFLAGS = @CFLAGS@
RANLIB = @RANLIB@
LN_S = @LN_S@

# Source directory and, if necessary, VPATH
srcdir = @srcdir@
VPATH = @srcdir@

MORECFLAGS = -I$(srcdir) -I$(srcdir)/.. -DNEWCONFIGLIB=\"$(newconfigdir)\" -DOLDCONFIGLIB=\"$(oldconfigdir)\"

OBJS = addblk.o addstr.o allblk.o alloc.o base.o bool.o callin.o \
	calout.o chatc.o cmdarg.o cmdfil.o cmdlin.o debfil.o deblev.o \
	diacod.o dial.o diasub.o dnams.o errno.o errstr.o filnam.o \
	freblk.o fredia.o free.o freprt.o fresys.o grdcmp.o hdial.o \
	hdnams.o hinit.o hlocnm.o hport.o hsinfo.o hsnams.o hsys.o \
	hunk.o iniglb.o init.o int.o lckdir.o lineno.o locnm.o \
	logfil.o maxuxq.o mrgblk.o paramc.o port.o prtsub.o pubdir.o \
	rdlocs.o rdperm.o reliab.o sinfo.o snams.o split.o spool.o \
	stafil.o syssub.o tcalou.o tdial.o tdialc.o tdnams.o tgcmp.o \
	thread.o time.o tinit.o tlocnm.o tport.o tportc.o tsinfo.o \
	tsnams.o tsys.o tval.o ugtlin.o unk.o val.o vinit.o vport.o \
	vsinfo.o vsnams.o vsys.o

all: libuuconf.a uuconv

libuuconf.a: $(OBJS)
	rm -f libuuconf.a
	ar rc libuuconf.a $(OBJS)
	-$(RANLIB) libuuconf.a

uuconv: uuconv.o getopt.o libuuconf.a
	$(CC) $(LDFLAGS) -o uuconv uuconv.o getopt.o libuuconf.a $(LIBS)

.c.o:
	$(CC) -c $(CFLAGS) $(MORECFLAGS) $<

syshdr.h: syshdr.unx
	rm -f syshdr.h
	$(LN_S) $(srcdir)/syshdr.unx syshdr.h

clean:
	rm -f $(OBJS) uuconv.o libuuconf.a uuconv

distclean: clean
	rm -f conf.h config.status

# My build targets; not expected to work elsewhere.

dist: MANIFEST configure

Makefile: Makefile.in
	(cd $(srcdir)/..; sh config.status)

# Header file dependencies

HDRS = uucnfi.h syshdr.h $(srcdir)/../uucp.h $(srcdir)/../conf.h $(srcdir)/../policy.h $(srcdir)/../uuconf.h

uuconv.o: uucnfi.h uuconf.h conf.h policy.h syshdr.h getopt.h

addblk.o: $(HDRS) alloc.h
addstr.o: $(HDRS)
allblk.o: $(HDRS) alloc.h
alloc.o: $(HDRS) alloc.h
base.o: $(HDRS)
bool.o: $(HDRS)
callin.o: $(HDRS)
calout.o: $(HDRS)
chatc.o: $(HDRS)
cmdarg.o: $(HDRS)
cmdfil.o: $(HDRS)
cmdlin.o: $(HDRS)
debfil.o: $(HDRS)
deblev.o: $(HDRS)
diacod.o: $(HDRS)
dial.o: $(HDRS)
diasub.o: $(HDRS)
dnams.o: $(HDRS)
errno.o: $(HDRS)
errstr.o: $(HDRS)
filnam.o: $(HDRS)
freblk.o: $(HDRS) alloc.h
fredia.o: $(HDRS)
free.o: $(HDRS) alloc.h
freprt.o: $(HDRS)
fresys.o: $(HDRS)
grdcmp.o: $(HDRS)
hdial.o: $(HDRS)
hdnams.o: $(HDRS)
hinit.o: $(HDRS)
hlocnm.o: $(HDRS)
hport.o: $(HDRS)
hsinfo.o: $(HDRS)
hsnams.o: $(HDRS)
hsys.o: $(HDRS)
hunk.o: $(HDRS)
iniglb.o: $(HDRS)
init.o: $(HDRS)
int.o: $(HDRS)
lckdir.o: $(HDRS)
lineno.o: $(HDRS)
locnm.o: $(HDRS)
logfil.o: $(HDRS)
maxuxq.o: $(HDRS)
mrgblk.o: $(HDRS) alloc.h
paramc.o: $(HDRS)
port.o: $(HDRS)
prtsub.o: $(HDRS)
pubdir.o: $(HDRS)
rdlocs.o: $(HDRS)
rdperm.o: $(HDRS)
reliab.o: $(HDRS)
sinfo.o: $(HDRS)
snams.o: $(HDRS)
split.o: $(HDRS)
spool.o: $(HDRS)
stafil.o: $(HDRS)
syssub.o: $(HDRS)
tcalou.o: $(HDRS)
tdial.o: $(HDRS)
tdialc.o: $(HDRS)
tdnams.o: $(HDRS)
tgcmp.o: $(HDRS)
thread.o: $(HDRS)
time.o: $(HDRS)
tinit.o: $(HDRS)
tlocnm.o: $(HDRS)
tport.o: $(HDRS)
tportc.o: $(HDRS)
tsinfo.o: $(HDRS)
tsnams.o: $(HDRS)
tsys.o: $(HDRS)
tval.o: $(HDRS)
ugtlin.o: $(HDRS)
unk.o: $(HDRS)
val.o: $(HDRS)
vinit.o: $(HDRS)
vport.o: $(HDRS)
vsinfo.o: $(HDRS)
vsnams.o: $(HDRS)
vsys.o: $(HDRS)
