# Makefile for Taylor UUCP

# Define programs and flags
CC = gcc
CFLAGS = -Wall -Wshadow -Wwrite-strings -g
LIBS =
LN = ln

# Define destination directories for make install
LIBDIR = /usr/lib/uucp
BINDIR = /usr/bin

# Nothing else to configure

UUOBJS = uucico.o prot.o protg.o config.o v2.o bnu.o file.o util.o sysinf.o \
	prtinf.o time.o log.o chat.o port.o parse.o copy.o sys1.o sys2.o \
	sys3.o sys4.o getopt.o
XQTOBJS = uuxqt.o config.o v2.o bnu.o util.o sysinf.o prtinf.o time.o log.o \
	copy.o sys1.o sys3.o sys5.o getopt.o
UUXOBJS = uux.o config.o v2.o bnu.o util.o sysinf.o prtinf.o time.o log.o \
	copy.o sys1.o sys3.o sys6.o getopt.o
UUCPOBJS = uucp.o config.o v2.o bnu.o util.o sysinf.o prtinf.o time.o log.o \
	copy.o sys1.o sys3.o sys6.o getopt.o
UUCHKOBJS = uuchk.o config.o v2.o bnu.o util.o sysinf.o prtinf.o time.o \
	log.o sys1.o getopt.o
TSTOBJS = tstuu.o getopt.o

ALLOBJS = uucico.o uuxqt.o uux.o uucp.o uuchk.o tstuu.o prot.o protg.o \
	config.o v2.o bnu.o file.o util.o sysinf.o prtinf.o time.o \
	log.o chat.o port.o parse.o copy.o sys1.o sys2.o sys3.o sys4.o \
	sys5.o sys6.o getopt.o

all: uucico uuxqt uux uucp uuchk tstuu

install: uucico uuxqt uux uucp uuchk
	cp uucico uuxqt uuchk $(LIBDIR)
	chown uucp $(LIBDIR)/uucico $(LIBDIR)/uuxqt $(LIBDIR)/uuchk
	chmod 4555 $(LIBDIR)/uucico $(LIBDIR)/uuxqt
	cp uux uucp $(BINDIR)
	chown uucp $(BINDIR)/uux $(BINDIR)/uucp
	chmod 4555 $(BINDIR)/uux $(BINDIR)/uucp

uucico: $(UUOBJS)
	$(CC) $(CFLAGS) -o uucico $(UUOBJS) $(LIBS)

uuxqt: $(XQTOBJS)
	$(CC) $(CFLAGS) -o uuxqt $(XQTOBJS) $(LIBS)

uux: $(UUXOBJS)
	$(CC) $(CFLAGS) -o uux $(UUXOBJS) $(LIBS)

uucp: $(UUCPOBJS)
	$(CC) $(CFLAGS) -o uucp $(UUCPOBJS) $(LIBS)

uuchk: $(UUCHKOBJS)
	$(CC) $(CFLAGS) -o uuchk $(UUCHKOBJS) $(LIBS)

tstuu: $(TSTOBJS)
	$(CC) $(CFLAGS) -o tstuu $(TSTOBJS) $(LIBS)

configure-unix:
	$(LN) sysh.unx sysdep.h
	$(LN) sys1.unx sys1.c
	$(LN) sys2.unx sys2.c
	$(LN) sys3.unx sys3.c
	$(LN) sys4.unx sys4.c
	$(LN) sys5.unx sys5.c
	$(LN) sys6.unx sys6.c

clean:
	rm -f $(ALLOBJS) uucico uuxqt uux uucp uuchk tstuu

uucico.o: uucp.h conf.h system.h prot.h port.h sysdep.h getopt.h
uuxqt.o: uucp.h conf.h system.h getopt.h sysdep.h
uux.o: uucp.h conf.h system.h getopt.h sysdep.h
uucp.o: uucp.h conf.h system.h getopt.h sysdep.h
uuchk.o: uucp.h conf.h port.h system.h getopt.h sysdep.h
tstuu.o: uucp.h conf.h getopt.h
prot.o: uucp.h conf.h system.h prot.h port.h
protg.o: uucp.h conf.h system.h prot.h sysdep.h
config.o: uucp.h conf.h system.h sysdep.h
bnu.o: uucp.h conf.h port.h
v2.o: uucp.h conf.h port.h
file.o: uucp.h conf.h system.h
util.o: uucp.h conf.h
sysinf.o: uucp.h conf.h system.h port.h sysdep.h
time.o: uucp.h conf.h
log.o: uucp.h conf.h system.h
chat.o: uucp.h conf.h system.h port.h sysdep.h
port.o: uucp.h conf.h port.h sysdep.h
prtinf.o: uucp.h conf.h port.h sysdep.h
parse.o: uucp.h conf.h
copy.o: uucp.h conf.h system.h sysdep.h
sys1.o: uucp.h conf.h system.h sysdep.h
sys2.o: uucp.h conf.h system.h port.h sysdep.h
sys3.o: uucp.h conf.h system.h sysdep.h
sys4.o: uucp.h conf.h system.h sysdep.h
sys5.o: uucp.h conf.h system.h sysdep.h
sys6.o: uucp.h conf.h system.h sysdep.h
getopt.o: uucp.h conf.h getopt.h
